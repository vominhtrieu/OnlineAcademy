<%- include("partials/header", {title: "Đăng nhập", css: ["auth"]}) %> <%-include("partials/navbar") %>

<div class="container mt-5">
  <div class="card shadow-sm border-0">
    <div class="row">
      <div class="col-md-6 col-xs-12 d-flex align-items-center">
        <img class="w-100" src="assets/learning.svg" />
      </div>

      <div class="col-md-6 col-xs-12">
        <div id="auth-container" class="mx-auto">
          <div class="card-body">
            <h4 class="card-title text-center mb-4 mt-1">Đăng nhập</h4>
            <hr />
            <%- include('partials/messageAlert') %>
            <form class="form-group mt-4" method="POST" action="/signin">
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text"><i class="fa fa-user"></i></span>
                </div>
                <input
                  type="text"
                  name="email"
                  id="email"
                  placeholder="Email"
                  class="form-control"
                  aria-describedby="helpId"
                />
              </div>
              <div class="input-group my-3">
                <div class="input-group-prepend">
                  <span class="input-group-text"><i class="fa fa-lock"></i></span>
                </div>
                <input
                  type="password"
                  name="password"
                  id="password"
                  placeholder="Password"
                  class="form-control"
                  aria-describedby="helpId"
                />
              </div>

              <button id="submit-btn" class="btn btn-primary mt-2">Đăng nhập</button>
              <p class="text-center text-primary mt-2">
                <a href="#">Quên mật khẩu</a>
              </p>
            </form>

            <div class="or-container border-0">
              <div class="line-separator"></div>
              <div class="or-label">hoặc</div>
              <div class="line-separator"></div>
            </div>

            <div
              class="g-signin2"
              data-width="370"
              data-longtitle="true"
              data-onsuccess="onSignIn"
              data-theme="dark"
            ></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  function onSignIn(googleUser) {
    // Useful data for your client-side scripts:
    var profile = googleUser.getBasicProfile();
    console.log('ID: ' + profile.getId()); // Don't send this directly to your server!
    console.log('Full Name: ' + profile.getName());
    console.log('Given Name: ' + profile.getGivenName());
    console.log('Family Name: ' + profile.getFamilyName());
    console.log('Image URL: ' + profile.getImageUrl());
    console.log('Email: ' + profile.getEmail());

    // The ID token you need to pass to your backend:
    var id_token = googleUser.getAuthResponse().id_token;
    console.log('ID Token: ' + id_token);
  }

  function renderButton() {
    gapi.signin2.render('my-signin2', {
      scope: 'profile email',
      width: 500,
      height: 50,
      longtitle: true,
      theme: 'dark',
      onsuccess: onSuccess,
      onfailure: onFailure,
    });
  }
</script>
<%- include("partials/footer") %>
